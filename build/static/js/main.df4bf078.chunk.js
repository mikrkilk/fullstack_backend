(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var u=n(0),r=n(6),c=n(3),s=n(2),a=n(15),o=n.n(a),i=function(e){return Object(u.jsxs)("div",{children:["Filter shown with:",Object(u.jsx)("input",{value:e.filt,onChange:e.chg})]})},j=function(e){var t=e.text,n=e.val,r=e.chg;return Object(u.jsxs)("div",{children:[t," ",Object(u.jsx)("input",{value:n,onChange:r})]})},l=function(e){var t=e.name,n=e.number,r=e.namChg,c=e.numChg,s=e.subm;return Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:s,children:[Object(u.jsx)(j,{text:"Name:",val:t,chg:r},"name"),Object(u.jsx)(j,{text:"Number:",val:n,chg:c},"num"),Object(u.jsx)("button",{type:"submit",children:"Add"})]})})},b=function(e){var t=e.message,n=e.status;return null===t?null:Object(u.jsx)("div",{className:n,children:t})},d=function(e){var t=e.name,n=e.number,r=e.onPush;return Object(u.jsxs)("li",{children:[t," ",n," ",Object(u.jsx)("button",{onClick:r,children:"delete"})]})},h=function(e){var t=e.content,n=e.onPush,r=e.filter;return Object(u.jsx)("div",{children:Object(u.jsx)("ul",{children:t.map((function(e){return e.name.toLowerCase().includes(r.toLowerCase())?Object(u.jsx)(d,{name:e.name,number:e.number,onPush:function(){return n(e.id)}},e.name):""}))})})},f=n(4),m=n.n(f),O="/api/persons",g=function(){return m.a.get(O).then((function(e){return e.data}))},x=function(e){return m.a.post(O,e).then((function(e){return e.data}))},v=function(e,t){return m.a.put("".concat(O,"/").concat(e),t).then((function(e){return e.data}))},p=function(e){return m.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))},w=(n(38),function(){var e=Object(s.useState)([]),t=Object(c.a)(e,2),n=t[0],a=t[1],o=Object(s.useState)(""),j=Object(c.a)(o,2),d=j[0],f=j[1],m=Object(s.useState)(""),O=Object(c.a)(m,2),w=O[0],C=O[1],S=Object(s.useState)(""),k=Object(c.a)(S,2),y=k[0],P=k[1],N=Object(s.useState)({message:null,status:"note"}),A=Object(c.a)(N,2),E=A[0],J=A[1];Object(s.useEffect)((function(){g().then((function(e){a(e)}))}),[]);var L=function(e){J(e),setTimeout((function(){J({message:null,status:"note"})}),5e3)};return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(b,{message:E.message,status:E.status}),Object(u.jsx)(i,{filt:y,chg:function(e){return P(e.target.value)}}),Object(u.jsx)("h3",{children:"Add a new"}),Object(u.jsx)(l,{name:d,number:w,namChg:function(e){return f(e.target.value)},numChg:function(e){return C(e.target.value)},subm:function(e){e.preventDefault();var t=n.find((function(e){return e.name===d}));void 0!==t?window.confirm(d+" is already in the phonebook! \n Update with a new number?")&&(console.log(t),v(t.id,Object(r.a)(Object(r.a)({},t),{},{number:w})).then((function(e){a(n.map((function(n){return n.id!==t.id?n:e}))),f(""),C(""),L({message:"Updated "+d,status:"note"})})).catch((function(e){return L({message:"Could not edit "+d+": "+e.response.data.error,status:"error"})}))):x({name:d,number:w}).then((function(e){L({message:"Added "+d,status:"note"}),g().then((function(e){a(e)})),f(""),C("")})).catch((function(e){return L({message:"Could not add "+d+": "+e.response.data.error,status:"error"})}))}}),Object(u.jsx)("h3",{children:"Numbers"}),Object(u.jsx)(h,{content:n,onPush:function(e){p(e).then((function(t){L({message:"Entry removed successfully",status:"note"}),a(n.filter((function(t){return t.id!==e})))})).catch((function(e){return L({message:e,status:"error"})}))},filter:y})]})});o.a.render(Object(u.jsx)(w,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.df4bf078.chunk.js.map